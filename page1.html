<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Surprise</title>

<style>
  body{
    margin:0;
    height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    background:#a7c7ff;
    font-family:'Poppins',system-ui,sans-serif;
    overflow:hidden;
    text-align:center;
  }

  .cat{
    width:220px;
    margin-bottom:20px;
  }

  .timer{
    display:flex;
    gap:12px;
    font-size:26px;
    color:#fff;
  }

  .box{
    background:rgba(255,255,255,0.25);
    padding:14px 18px;
    border-radius:14px;
    min-width:70px;
  }

  button{
    margin-top:28px;
    padding:12px 28px;
    border-radius:14px;
    border:none;
    font-weight:700;
    cursor:pointer;
    background:#ff8fb8;
    color:white;
    display:none;
  }

  button.show{
    display:block;
  }
</style>
</head>

<body>

<img class="cat"
  src="https://res.cloudinary.com/dcygfcuov/image/upload/v1765809869/Picsart_25-12-15_20-13-58-790_oppdt5.png"
  alt="Cute cat">

<div class="timer">
  <div class="box"><span id="days">0</span><br>Days</div>
  <div class="box"><span id="hours">00</span><br>Hours</div>
  <div class="box"><span id="minutes">00</span><br>Min</div>
  <div class="box"><span id="seconds">00</span><br>Sec</div>
</div>

<button id="nextBtn" onclick="startMusicAndGo()">Click ðŸ’—</button>

<!-- ðŸŽµ MUSIC -->
<audio id="music" preload="auto">
  <source src="https://res.cloudinary.com/dcygfcuov/video/upload/v1765368210/HAPPY_BIRTHDAY_TO_YOU___PIANO_INSTRUMENTAL___BEST_HAPPY_BITHDAY_MUSIC_2021_MP3_160K_oqnfxy.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
/* ===== TARGET: 26 DEC, 12:00 AM IST ===== */
const TARGET = new Date(Date.UTC(
  new Date().getFullYear(),
  11,
  25,
  18, 30, 0
));

let triggered = false;

/* ===== CONFETTI ===== */
function burst(){
  confetti({
    particleCount:120,
    spread:80,
    origin:{ y:0.6 }
  });
}

function multipleBursts(){
  burst();
  setTimeout(burst, 700);
  setTimeout(burst, 1400);
}

/* ===== MUSIC + NAVIGATION (FIXED) ===== */
function startMusicAndGo(){
  const music = document.getElementById("music");
  music.volume = 0.8;

  music.play().then(() => {
    // let music play for a moment BEFORE navigating
    setTimeout(() => {
      window.location.href = "page2.html";
    }, 1200); // 1.2 seconds is enough to hear it
  }).catch(err => {
    // even if play fails, still navigate
    window.location.href = "page2.html";
  });
}

/* ===== COUNTDOWN ===== */
function updateCountdown(){
  const now = new Date();
  let diff = TARGET - now;

  if(diff <= 0){
    diff = 0;

    if(!triggered){
      triggered = true;
      multipleBursts();

      setTimeout(()=>{
        document.getElementById("nextBtn").classList.add("show");
      },5000);
    }
  }

  const s = Math.floor(diff / 1000);
  document.getElementById("days").textContent = Math.floor(s / 86400);
  document.getElementById("hours").textContent =
    String(Math.floor((s % 86400) / 3600)).padStart(2,'0');
  document.getElementById("minutes").textContent =
    String(Math.floor((s % 3600) / 60)).padStart(2,'0');
  document.getElementById("seconds").textContent =
    String(s % 60).padStart(2,'0');
}

updateCountdown();
setInterval(updateCountdown, 1000);
</script>

</body>
</html>
